package com.dlc.electronicbalance.activity;

import android.app.Dialog;
import android.os.Bundle;
import android.support.v7.widget.DividerItemDecoration;
import android.support.v7.widget.GridLayoutManager;
import android.support.v7.widget.LinearLayoutManager;
import android.support.v7.widget.RecyclerView;
import android.view.View;

import com.dlc.electronicbalance.R;
import com.dlc.electronicbalance.adapter.MaterialOprateAdapter;
import com.dlc.electronicbalance.adapter.MaterialTypeAdapter;
import com.dlc.electronicbalance.base.BaseActivity;
import com.dlc.electronicbalance.interfaces.DialogBtnCallBack;
import com.dlc.electronicbalance.interfaces.ItemBtnCallBack;
import com.dlc.electronicbalance.interfaces.ItemOnclick;
import com.dlc.electronicbalance.widget.dialog.AddMaterialDialog;
import com.dlc.electronicbalance.widget.dialog.DeleteDialog;
import com.dlc.electronicbalance.widget.dialog.StatusDialog;

import java.util.ArrayList;

import butterknife.BindView;
import butterknife.OnClick;

public class MaterialSettingActivity extends BaseActivity {

    @BindView(R.id.rv_type)
    RecyclerView rv_type;
    @BindView(R.id.rv_material)
    RecyclerView rv_material;
    private MaterialOprateAdapter adapter;
    private StatusDialog statusDialog;

    @Override
    protected int getLayoutID() {
        return R.layout.activity_material_setting;
    }

    @Override
    protected void afterSetContentView(Bundle savedInstanceState) {
        super.afterSetContentView(savedInstanceState);

        initRecycleView();
    }

    private void initRecycleView() {
        rv_type.setLayoutManager(new GridLayoutManager(this,4));
        rv_type.setAdapter(new MaterialTypeAdapter(this));

        rv_material.setLayoutManager(new LinearLayoutManager(this));
        rv_material.addItemDecoration(new DividerItemDecoration(this,DividerItemDecoration.VERTICAL));
        adapter = new MaterialOprateAdapter(this);
        rv_material.setAdapter(adapter);

        adapter.setOnItemOnClick(new ItemOnclick() {
            @Override
            public void onClick(View view, String id) {

            }
        });

        adapter.setItemBtnClick(new ItemBtnCallBack() {
            @Override
            public void onDelete(View view, String id) {
                DeleteDialog deleteDialog = new DeleteDialog(MaterialSettingActivity.this);
                deleteDialog.init("是否删除该料品","取消","删除").show();
                deleteDialog.setDialogBtnClick(new DialogBtnCallBack() {
                    @Override
                    public void onFirstBtnClick(Dialog dialog, Object obj) {
                        dialog.dismiss();
                    }

                    @Override
                    public void onSecondBtnClick(Dialog dialog, Object obj) {
                        dialog.dismiss();
                        showStatusDialog("删除成功!");
                    }
                });
            }

            @Override
            public void onEdit(View view, String id) {
                ArrayList<String> data_list01 = new ArrayList<String>();
                data_list01.add("请选择料品");

                data_list01.add("料品1");
                data_list01.add("料品2");
                data_list01.add("料品3");

                ArrayList<String> data_list02 = new ArrayList<String>();
                data_list02.add("请选择喷码信息");
                data_list02.add("5656232");
                data_list02.add("5656123");
                data_list02.add("5123123");
                AddMaterialDialog addDialog = new AddMaterialDialog(MaterialSettingActivity.this);
                addDialog.init("编辑料品","取消","保存").initSpinnerData(data_list01,data_list02).show();
                addDialog.setDialogBtnClick(new DialogBtnCallBack() {
                    @Override
                    public void onFirstBtnClick(Dialog dialog, Object obj) {
                        dialog.dismiss();
                    }

                    @Override
                    public void onSecondBtnClick(Dialog dialog, Object obj) {
                        dialog.dismiss();
                        showStatusDialog("编辑成功!");
                    }
                });
            }
        });
    }

    @OnClick(R.id.tv_add_new)
    public void onBtnClick(View v){
        switch (v.getId()){
            case R.id.tv_add_new:
                ArrayList<String> data_list01 = new ArrayList<String>();
                data_list01.add("请选择料品");

                data_list01.add("料品1");
                data_list01.add("料品2");
                data_list01.add("料品3");

                ArrayList<String> data_list02 = new ArrayList<String>();
                data_list02.add("请选择喷码信息");
                data_list02.add("5656232");
                data_list02.add("5656123");
                data_list02.add("5123123");
                AddMaterialDialog addDialog = new AddMaterialDialog(this);
                addDialog.init(null,null,null).initSpinnerData(data_list01,data_list02).show();
                addDialog.setDialogBtnClick(new DialogBtnCallBack() {
                    @Override
                    public void onFirstBtnClick(Dialog dialog, Object obj) {
                        dialog.dismiss();
                    }

                    @Override
                    public void onSecondBtnClick(Dialog dialog, Object obj) {
                        dialog.dismiss();
                        showStatusDialog("添加成功!");
                    }
                });
                break;
        }
    }

    private void showStatusDialog(String message) {
        if(statusDialog == null){
            statusDialog = new StatusDialog(this);
        }
        statusDialog.init(message,R.mipmap.ic_success).dismissInTime(statusDialog,3000L).show();
    }
}
